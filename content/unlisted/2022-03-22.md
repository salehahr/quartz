---
title: 2022-03-22
date: 2022-03-18
aliases:
- /besprechung
tags:
  - ma
---

## Agenda
* Optimising the decision threshold on test set after training/tuning
* Hyperparameter optimisation
* Optimised adj_matr prediction times, s. [corresponding run script](https://github.com/salehahr/tfgraph/blob/06731b9/adj_nn_combi.py)  
    ![](/unlisted/_img/A_pred_times.png)  
    * Only the very first run seems problematic (maybe due to first call of `model.__call__`?) -- load CUDA message appears
    * The following prediction runs are much quicker by comparison

Predictions in the loop:  
![](/unlisted/_img/A_pred_loop.png)

## Notes
### Hyperparameter optimisation
* Ueberlegen noch, welche Modellarch.param. sinnvoll
* Training settings so that it doesn't train so long, maybe up to 50 epochs, 1000 images per epoch
* Initial weights to speed up training
* Run on 3 computers, nohup


### Bottleneck at `model.__call__`
![](Pasted%20image%2020220319120042.png)

https://github.com/tensorflow/tensorflow/issues/39458
https://github.com/tensorflow/tensorflow/issues/44711
> as mentioned above, `predict` shouldn't be used in a loop. Sad things happen if you do. Ideally use model call w/ training=False directly (manually wrapping your model call in a tf.function if needed for performance reasons)

https://linuxtut.com/en/6aeca92cb65b052cbafd/
### Improvements to logic
* `remove_conflicting` currently removes all nodes with problems -- maybe better to take highest probability option.
* condition to stop iterating